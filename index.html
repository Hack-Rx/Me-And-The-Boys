<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Home</title>

 <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

	<style type="text/css">
		#rooms{
			border: 1px solid black;
			min-height: 444px;
		}
		#roomid{
			cursor: not-allowed;
		}
	</style>
</head>
<body>
	<div id="myid"></div>
	<div id="rooms"></div>
	<a class="waves-effect waves-light btn modal-trigger" href="#modal1">
	  Create Your Own Room
	</a>

   <div id="modal1" class="modal" style="padding: 19px">
   	<label>Room Number</label>
   	<input type="text" id='roomid' readonly>
		<label>Room Name</label>
   	<input type="text">
		<label>Room Description</label>
   	<input type="text">
		<label>Thumbnail</label>
   	<input type="file">
		<button class="btn" onclick="createRoom()">Create Your Own Room</button>
   </div>

    <!-- Compiled and minified JavaScript -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/7.15.1/firebase-database.js"></script>
	<script src="fireconfig.js"></script>
	<script src="https://cdn.plyr.io/3.6.2/plyr.js"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

	<script type="text/javascript">
		var id  =  localStorage.getItem("theid");
		if (!id) {
			id = Math.floor((Math.random() * 9999999) + 1);		
    	localStorage.setItem("theid", id);
		}
		$('#myid').append('<h3>Your User ID is : '+localStorage.getItem("theid")+'</h3>');
		$('#roomid').val(localStorage.getItem("theid"));

		const fdb = firebase.database();

    function createRoom(){
			fdb.ref('rooms/'+id).set({
				currentTime : 0,
				videoId : "none",
				isPlaying : false
			});
    }

    fdb.ref('rooms/').on('value', function(snapshot) {
    	var allrooms = snapshot.val();
    	let rnames = Object.keys(allrooms);
    	$('#rooms').empty();
    	rnames.forEach(name=>{
    		$('#rooms').append(`<a href='room.html?q=${name}'>Room No ${name}</a><br>`)
    	});
		});
		$(document).ready(function(){
    $('.modal').modal();
  	});
     
		
// 0 2 @ * () % ^ & $ # ! 		
//file:///C:/Users/Rishabh/Documents/firesync/index.html
	</script>
</body>
</html>